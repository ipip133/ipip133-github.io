<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE ARK - ARCHIVE SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. í…Œë§ˆ ë° ë°°ê²½ --- */
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --hero-color: #FFD700;    /* ê³¨ë“œ */
            --villain-color: #bc13fe; /* í¼í”Œ */
            --res-color: #ff003c;     /* ë ˆë“œ */
            --panel-bg: rgba(20, 20, 20, 0.9);
        }

        body {
            background: url('https://wallpaperaccess.com/full/3609625.jpg') no-repeat center center fixed;
            background-size: cover;
            box-shadow: inset 0 0 0 2000px rgba(0, 0, 0, 0.75);
            color: var(--text-color);
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            overflow-x: hidden;
        }

        .scanline {
            width: 100%; height: 100vh; position: fixed; left: 0; top: 0; z-index: 999;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px; pointer-events: none;
        }

        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; margin: 0; }

        /* --- 2. ë©”ì¸ í™”ë©´ --- */
        .hero-section {
            height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 0 20px;
        }

        .glitch-title {
            font-size: 4rem; font-weight: 900; color: white; margin-bottom: 20px; position: relative;
            text-shadow: 2px 2px var(--res-color), -2px -2px var(--villain-color);
            animation: glitch-anim 2.5s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { transform: skew(0.5deg); } 20% { transform: skew(-1deg); } 40% { transform: skew(0.2deg); }
            60% { transform: skew(0.5deg); } 80% { transform: skew(-0.2deg); } 100% { transform: skew(1deg); }
        }

        .subtitle { font-size: 1.2rem; line-height: 1.6; max-width: 700px; text-shadow: 0 0 10px rgba(0,0,0,0.8); }
        .scroll-down { margin-top: 60px; font-size: 1.5rem; color: #fff; cursor: pointer; animation: bounce 2s infinite; opacity: 0.8; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }

        /* --- 3. ê³µí†µ ë ˆì´ì•„ì›ƒ --- */
        .section { padding: 100px 10%; position: relative; border-bottom: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(3px); }
        .section-title { font-size: 2rem; margin-bottom: 40px; border-left: 4px solid #fff; padding-left: 15px; color: #fff; }

        /* --- 4. ì„¸ê³„ê´€ íƒ­ --- */
        .lore-container { background: var(--panel-bg); border: 1px solid #444; border-radius: 10px; overflow: hidden; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        .tabs { display: flex; border-bottom: 1px solid #444; background: #111; }
        .tab-btn { flex: 1; padding: 20px; cursor: pointer; text-align: center; font-family: 'Orbitron'; font-weight: bold; color: #666; transition: 0.3s; background: transparent; border: none; font-size: 1rem; }
        .tab-btn:hover { background: #222; color: #ccc; }
        .tab-btn.active { background: #222; color: var(--hero-color); border-bottom: 3px solid var(--hero-color); }
        .tab-content { display: none; padding: 40px; animation: fadeIn 0.5s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
        .lore-h4 { color: #fff; margin-bottom: 15px; border-bottom: 1px solid #555; padding-bottom: 5px; font-size: 1.2rem; }
        .lore-p { font-size: 0.95rem; line-height: 1.7; color: #ccc; margin-bottom: 20px; }
        .lore-list li { margin-bottom: 8px; color: #aaa; font-size: 0.9rem; }

        /* --- 5. [NEW] ìºë¦­í„° í•„í„° ë²„íŠ¼ --- */
        .filter-container { display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; flex-wrap: wrap; }
        .filter-btn {
            padding: 10px 25px; border: 1px solid #444; background: #111; color: #888;
            font-family: 'Orbitron'; font-size: 0.9rem; cursor: pointer; transition: 0.3s; border-radius: 20px;
        }
        .filter-btn:hover { border-color: #fff; color: #fff; }
        .filter-btn.active { background: #fff; color: #000; border-color: #fff; font-weight: bold; }
        
        /* ì„¸ë ¥ë³„ ë²„íŠ¼ ìƒ‰ìƒ í¬ì¸íŠ¸ */
        .filter-btn[data-filter="hero"]:hover, .filter-btn[data-filter="hero"].active { border-color: var(--hero-color); color: var(--hero-color); background: #111; }
        .filter-btn[data-filter="villain"]:hover, .filter-btn[data-filter="villain"].active { border-color: var(--villain-color); color: var(--villain-color); background: #111; }
        .filter-btn[data-filter="res"]:hover, .filter-btn[data-filter="res"].active { border-color: var(--res-color); color: var(--res-color); background: #111; }

        /* --- 6. ìºë¦­í„° ê·¸ë¦¬ë“œ --- */
        .char-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 25px; min-height: 300px; }
        .char-card { background: rgba(20, 20, 20, 0.8); border: 1px solid #444; cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; animation: fadeIn 0.5s; }
        .char-card:hover { transform: translateY(-5px); border-color: #fff; box-shadow: 0 5px 20px rgba(0,0,0,0.7); }
        .char-img-area { height: 250px; width: 100%; background-color: #1a1a1a; background-size: cover; background-position: center; filter: grayscale(100%) contrast(1.2); transition: 0.5s; }
        .char-card:hover .char-img-area { filter: grayscale(0%) contrast(1); }
        .tag { position: absolute; top: 10px; right: 10px; padding: 4px 8px; font-size: 0.65rem; font-weight: bold; color: #000; z-index: 2; font-family: 'Orbitron'; }
        .char-info { padding: 15px; text-align: center; }
        .char-name { font-family: 'Orbitron'; font-size: 1.1rem; color: #fff; margin-bottom: 5px; }
        .char-role { font-size: 0.8rem; color: #888; }

        /* --- 7. ëª¨ë‹¬ íŒì—… --- */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .modal-content { 
            background: #111; width: 95%; max-width: 600px; border: 1px solid #444; 
            display: flex; flex-direction: column; border-radius: 12px; overflow: hidden; 
            animation: modalPop 0.3s ease-out; max-height: 90vh; overflow-y: auto;
        }
        @keyframes modalPop { from {transform: scale(0.9); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        
        .modal-header-bar { padding: 12px 15px; background: #000; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; }
        
        /* ì´ë¯¸ì§€ ì›ë³¸ ë¹„ìœ¨ ìœ ì§€ */
        .modal-top-img { width: 100%; height: auto; display: block; border-bottom: 1px solid #333; }

        .modal-body { padding: 25px; }
        .stat-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 12px 0; font-size: 0.95rem; }
        .stat-label { color: #666; font-size: 0.85rem; }
        .stat-val { color: #eee; font-weight: bold; text-align: right; }
        .quote-box { margin-top: 25px; padding: 15px; background: #080808; border-left: 3px solid #555; font-style: italic; font-size: 1rem; color: #ccc; line-height: 1.5; text-align: center; }

    </style>
</head>
<body>

    <div class="scanline"></div>

    <div class="hero-section">
        <h1 class="glitch-title">THE ARK</h1>
        <p class="subtitle">30ë…„ ì „ ëŒ€ì „ìŸìœ¼ë¡œ ì§€ìƒì´ ë©¸ë§í•˜ê³ ,<br>ì¸ë¥˜ê°€ ì„ íƒí•œ ë§ˆì§€ë§‰ ì§€í•˜ ë°©ì£¼.</p>
        <div class="scroll-down" onclick="window.scrollTo({top: window.innerHeight, behavior: 'smooth'})">â¬‡</div>
    </div>

    <div class="section">
        <div class="section-title">SYSTEM ARCHIVE</div>
        <div class="lore-container">
            <div class="tabs">
                <button class="tab-btn active" onclick="openTab(event, 'history')">HISTORY</button>
                <button class="tab-btn" onclick="openTab(event, 'region')">REGION</button>
                <button class="tab-btn" onclick="openTab(event, 'ability')">ABILITY</button>
            </div>

            <div id="history" class="tab-content active">
                <h4 class="lore-h4">ğŸ“œ 30ë…„ ì „ì˜ ì§„ì‹¤</h4>
                <p class="lore-p">30ë…„ ì „, íˆì–´ë¡œì™€ ë¹ŒëŸ°ì˜ ì „ìŸìœ¼ë¡œ ì§€ìƒì€ í™©íí™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì¸ë¥˜ëŠ” ì§€í•˜ ë„ì‹œ 'ì•„í¬'ë¥¼ ê±´ì„¤í–ˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div id="region" class="tab-content">
                <h4 class="lore-h4" style="color:var(--hero-color)">ğŸ™ï¸ ë¼ë””ì–¸íŠ¸ ìŠ¤íŒŒì´ì–´</h4>
                <p class="lore-p">íˆì–´ë¡œ ì—°í•© ë³¸ê±°ì§€. í–‰ì •Â·ë¯¸ë””ì–´ ì¤‘ì‹¬ì§€.</p>
                <h4 class="lore-h4" style="color:var(--villain-color)">ğŸŒƒ ì–´ë¹„ìŠ¤ êµ¬ì—­</h4>
                <p class="lore-p">ë¹ŒëŸ°ë“¤ì˜ ì§€í•˜ ë¬´ë²•ì§€ëŒ€.</p>
                <h4 class="lore-h4" style="color:var(--res-color)">ğŸšï¸ ì¸í¼ë„ ìŠ¬ëŸ¼</h4>
                <p class="lore-p">ë ˆì§€ìŠ¤íƒ•ìŠ¤ì˜ ê±°ì .</p>
            </div>
            <div id="ability" class="tab-content">
                <h4 class="lore-h4">âš¡ ì—í…Œë¥´ì™€ ê¸°í”„íŠ¸</h4>
                <p class="lore-p">ì—í…Œë¥´(ì„ ì²œì  ì—ë„ˆì§€) / ê¸°í”„íŠ¸(ì´ˆëŠ¥ë ¥)</p>
                <h4 class="lore-h4">ğŸ“ˆ ê²½ì§€ ì²´ê³„</h4>
                <p class="lore-p">ë¶ˆì”¨(F) â†’ íŒŒë™(D) â†’ ê³µëª…(C) â†’ ìœµí™”(B) â†’ ì‹¬í™”(A) â†’ í˜„í˜„(S)</p>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">CHARACTER DATABASE</div>
        
        <div class="filter-container">
            <button class="filter-btn active" onclick="filterChars('all', this)">ALL DATA</button>
            <button class="filter-btn" data-filter="hero" onclick="filterChars('hero', this)">RADIANT SPIRE</button>
            <button class="filter-btn" data-filter="villain" onclick="filterChars('villain', this)">ABYSS DISTRICT</button>
            <button class="filter-btn" data-filter="res" onclick="filterChars('res', this)">INFERNAL SLUM</button>
        </div>

        <div class="char-grid" id="charGrid"></div>
    </div>

    <div class="modal-overlay" id="modalOverlay" onclick="if(event.target == this) this.style.display='none'">
        <div class="modal-content" id="modalContent">
            <div class="modal-header-bar">
                <span style="font-family:'Orbitron'; font-size:0.8rem; color:#777;">FILE ACCESS...</span>
                <span style="cursor:pointer; color:#fff; font-size:1.2rem;" onclick="document.getElementById('modalOverlay').style.display='none'">&times;</span>
            </div>
            <img id="mImg" class="modal-top-img" src="" alt="Character Image">
            <div class="modal-body">
                <h2 id="mName" style="color:white; margin: 0 0 5px 0; font-family:'Orbitron'; font-size:1.8rem;">NAME</h2>
                <p id="mRole" style="color:#777; margin: 0 0 20px 0; font-size: 0.9rem;">ROLE</p>
                <div class="stat-row"><span class="stat-label">GIFT</span><span class="stat-val" id="mGift">-</span></div>
                <div class="stat-row"><span class="stat-label">RANK</span><span class="stat-val" id="mRank">-</span></div>
                <div class="stat-row"><span class="stat-label">PERSONALITY</span><span class="stat-val" id="mPersonality">-</span></div>
                <div class="stat-row"><span class="stat-label">NOTE</span><span class="stat-val" id="mNote">-</span></div>
                <div class="quote-box" id="mQuote">"..."</div>
            </div>
        </div>
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, x, tablinks;
            x = document.getElementsByClassName("tab-content");
            for (i = 0; i < x.length; i++) { x[i].style.display = "none"; }
            tablinks = document.getElementsByClassName("tab-btn");
            for (i = 0; i < tablinks.length; i++) { tablinks[i].classList.remove("active"); }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.classList.add("active");
        }

        // [ì¤‘ìš”] ì „ì²´ ìºë¦­í„° 17ëª… ë°ì´í„° ì…ë ¥ ì™„ë£Œ (ì´ë¯¸ì§€ëŠ” ì„ì‹œ)
        const allCharacters = [
            // HERO (ë¼ë””ì–¸íŠ¸ ìŠ¤íŒŒì´ì–´)
            { id: 1, name: "ì•„ìŠ¤íŠ¸ë¦¬ë“œ", faction: "hero", role: "í”„ë¼ì„", gift: "íƒœì–‘ê´‘ ì§‘ì•½", rank: "í˜„í˜„", personality: "ì—„ê²©/ì¹´ë¦¬ìŠ¤ë§ˆ", note: "ì—°í•© ìµœê°•ì", quote: "ë‚˜ì˜ ë¹› ì•„ë˜ ê·¸ë¦¼ìëŠ” í—ˆìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.", img: "https://via.placeholder.com/600x400/FFD700/000?text=Astrid" },
            { id: 2, name: "ì•„ë¦¬ì•„", faction: "hero", role: "ë§ˆìŠ¤í„°", gift: "ì „ê²© ì¡°ì‘", rank: "ì‹¬í™”", personality: "ì—„ê²©/ì˜í˜‘ì‹¬", note: "ë¹„í–‰ ê°€ëŠ¥", quote: "ì •ì˜ëŠ” ë²ˆê°œì²˜ëŸ¼ ë¹ ë¥´ì§€.", img: "https://via.placeholder.com/600x400/FFD700/000?text=Aria" },
            { id: 3, name: "ì‹¤ë¹„ì•„", faction: "hero", role: "ê°€ë””ì–¸", gift: "í™˜ì˜/ë§¤í˜¹", rank: "ê³µëª…", personality: "í™”ë ¤/ê³„ì‚°ì ", note: "ì–¸ë¡ ì˜ ì—¬ì™•", quote: "ì¹´ë©”ë¼ ë„ê³  ë§í•´.", img: "https://via.placeholder.com/600x400/ddd/000?text=Silvia" },
            { id: 4, name: "ì—˜ë¦¬ì‚¬", faction: "hero", role: "ì±”í”¼ì–¸", gift: "ëƒ‰ê¸° ë¶„ì¶œ", rank: "ìœµí™”", personality: "ëƒ‰ì •/ì—„ê²©", note: "-", quote: "ë¬¼ëŸ¬ì„œë¼. ì–¼ì–´ë¶™ê³  ì‹¶ì§€ ì•Šë‹¤ë©´.", img: "https://via.placeholder.com/600x400/AEEEEE/000?text=Elisa" },
            { id: 5, name: "ë¡œìë¦°", faction: "hero", role: "ì±”í”¼ì–¸", gift: "ì•…ëª½ íˆ¬ì˜", rank: "ìœµí™”", personality: "ì”í˜¹/ë„ë°œì ", note: "ì‹¬ë¬¸ì„ ì¦ê¹€", quote: "ë„¤ ê¿ˆì†ì€ ê½¤ ì‹œë„ëŸ½ë„¤?", img: "https://via.placeholder.com/600x400/8B008B/fff?text=Rosalin" },
            { id: 6, name: "ì„¸ë¼í•€", faction: "hero", role: "ê°€ë””ì–¸", gift: "í’ì•• ì¡°ì‘", rank: "ìœµí™”", personality: "ëª…ë‘/ë¶ˆì•ˆì •", note: "ì¸ê¸° íˆì–´ë¡œ", quote: "ë°”ëŒì„ íƒ€ê³  ë‚ ë ¤ë²„ë¦´ê¹Œ?", img: "https://via.placeholder.com/600x400/87CEEB/000?text=Seraphin" },
            { id: 7, name: "ì—ìŠ¤í…”", faction: "hero", role: "ê°€ë””ì–¸", gift: "ìŒíŒŒ ì¡°ì‘", rank: "ê³µëª…", personality: "ëª…ë‘/ì—´ì •", note: "ì•„ì´ëŒ ê²¸ì—…", quote: "ë‚´ ë…¸ë˜, ë“¤ì–´ë³¼ë˜?", img: "https://via.placeholder.com/600x400/FF69B4/fff?text=Estelle" },

            // VILLAIN (ì–´ë¹„ìŠ¤ êµ¬ì—­)
            { id: 8, name: "ì…€ë ˆë‚˜", faction: "villain", role: "ë³´ìŠ¤", gift: "ì–´ë‘  ì¥ë§‰", rank: "í˜„í˜„", personality: "ëƒ‰í˜¹/ì§€ë°°ìš•", note: "ì–´ë¹„ìŠ¤ì˜ ì ˆëŒ€ì", quote: "ì–´ë‘ ì€ ë¹›ë³´ë‹¤ ì§™ë‹¤.", img: "https://via.placeholder.com/600x400/9D00FF/fff?text=Selena" },
            { id: 9, name: "ì¹´ìŠ¤ë¯¸", faction: "villain", role: "ê°„ë¶€", gift: "í˜ˆì•¡ í¡ìˆ˜", rank: "ì‹¬í™”", personality: "ì”í˜¹/ê´€ëŠ¥", note: "ì¹´íƒ€ë‚˜ ì‚¬ìš©", quote: "í”¼ ëƒ„ìƒˆê°€ í–¥ê¸‹í•˜ë„¤?", img: "https://via.placeholder.com/600x400/8B0000/fff?text=Kasumi" },
            { id: 10, name: "ì•„ë¦¬ìŠ¤", faction: "villain", role: "ê°„ë¶€", gift: "ê³µí¬/ê°ì •ì§€ë°°", rank: "ì‹¬í™”", personality: "ì”í˜¹/ë„ë°œ", note: "-", quote: "ë„¤ ê³µí¬ê°€ ì°¸ ë§›ìˆì–´ ë³´ì—¬.", img: "https://via.placeholder.com/600x400/4B0082/fff?text=Aris" },
            { id: 11, name: "ë²¨ë¦¬ë‚˜", faction: "villain", role: "ì •ì˜ˆ", gift: "ë…ì„± í˜ˆì•¡", rank: "ê³µëª…", personality: "ì¾Œë½/ì˜ˆì¸¡ë¶ˆê°€", note: "ì„¸í¬ ë³€ì´", quote: "ì•„í”„ë©´ ë§í•´~ ë” ì•„í”„ê²Œ í•´ì¤„ê²Œ.", img: "https://via.placeholder.com/600x400/00FF00/000?text=Bellina" },
            { id: 12, name: "ë¯¸ì¹´", faction: "villain", role: "ì •ì˜ˆ", gift: "í˜ë¡œëª¬/í˜¸ë¥´ëª¬", rank: "ìœµí™”", personality: "ë„ë°œì /ë¬´ëª¨", note: "ë©”ìŠ¤ê°€í‚¤", quote: "í—ˆì ‘~â™¥ ê·¸ê²ƒë„ ëª» ì°¸ì•„?", img: "https://via.placeholder.com/600x400/FF1493/fff?text=Mika" },

            // RESISTANCE (ì¸í¼ë„ ìŠ¬ëŸ¼)
            { id: 13, name: "ì„¸ë¼í”¼ë‚˜ìŠ¤", faction: "res", role: "ì§€ë„ì", gift: "ì—¼ë™ë ¥", rank: "í˜„í˜„", personality: "ì‹ ë¹„/í—Œì‹ ", note: "ì „ ë§ˆìŠ¤í„°", quote: "ê±°ì§“ëœ ì •ì˜ë¥¼ ë¶€ìˆœë‹¤.", img: "https://via.placeholder.com/600x400/FF003C/fff?text=Serafinas" },
            { id: 14, name: "ë…¸ë¼", faction: "res", role: "ì—”ì§€ë‹ˆì–´", gift: "ê¸°ê³„ ì§ê°", rank: "ìœµí™”", personality: "ì¥ë‚œ/ì§‘ìš”", note: "ì²œì¬ ê¸°ìˆ ì", quote: "ì´ê±° í„°ì§€ë©´ ì•„íŒŒ!", img: "https://via.placeholder.com/600x400/777/fff?text=Nora" },
            { id: 15, name: "ì„¸ë¼", faction: "res", role: "í­íŒŒ ê³µì‘", gift: "ì—´/í­ë°œ ê³µëª…", rank: "ìœµí™”", personality: "ì¾Œí™œ/ê´‘ê¸°", note: "-", quote: "í‘! í•˜ê³  í„°ëœ¨ë¦¬ì!", img: "https://via.placeholder.com/600x400/FFA500/000?text=Sera" },
            { id: 16, name: "ë ˆë‚˜", faction: "res", role: "í•´ì»¤", gift: "ë°ì´í„° ê³µëª…", rank: "ìœµí™”", personality: "ì¬ì¹˜/ë°˜í•­", note: "ì „ìê¸° ì¹¨íˆ¬", quote: "ë°©í™”ë²½? 3ì´ˆë©´ ëš«ì–´.", img: "https://via.placeholder.com/600x400/00CED1/000?text=Lena" },
            { id: 17, name: "ë§ˆë¦¬ì—˜", faction: "res", role: "ì˜ë£Œ ì§€ì›", gift: "ì¬ìƒ ì´‰ì§„", rank: "ìœµí™”", personality: "í—Œì‹ /ì¡°ìš©", note: "ì§‘ìš”í•¨", quote: "ì›€ì§ì´ì§€ ë§ˆì„¸ìš”. ì¹˜ë£Œ ì¤‘ì…ë‹ˆë‹¤.", img: "https://via.placeholder.com/600x400/FFC0CB/000?text=Mariel" }
        ];

        const grid = document.getElementById('charGrid');

        // ì´ˆê¸° ì‹¤í–‰: ì „ì²´ ë³´ì—¬ì£¼ê¸°
        renderChars(allCharacters);

        // í•„í„° í•¨ìˆ˜
        function filterChars(filter, btnElement) {
            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ë³€ê²½
            const buttons = document.getElementsByClassName('filter-btn');
            for (let btn of buttons) { btn.classList.remove('active'); }
            btnElement.classList.add('active');

            // ë°ì´í„° í•„í„°ë§
            let filtered = [];
            if (filter === 'all') {
                filtered = allCharacters;
            } else {
                filtered = allCharacters.filter(c => c.faction === filter);
            }
            renderChars(filtered);
        }

        // ë Œë”ë§ í•¨ìˆ˜
        function renderChars(list) {
            grid.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì§€ìš°ê¸°
            
            list.forEach((c) => {
                const card = document.createElement('div');
                card.className = 'char-card';
                
                let tagBg = '#444';
                let tagColor = '#fff';
                if(c.faction === 'hero') { tagBg = 'var(--hero-color)'; tagColor = '#000'; }
                if(c.faction === 'villain') tagBg = 'var(--villain-color)';
                if(c.faction === 'res') tagBg = 'var(--res-color)';
                
                // faction ëŒ€ë¬¸ì ë³€í™˜
                let factionName = "UNKNOWN";
                if(c.faction === 'hero') factionName = "HERO";
                if(c.faction === 'villain') factionName = "VILLAIN";
                if(c.faction === 'res') factionName = "RESISTANCE";

                card.innerHTML = `
                    <div class="tag" style="background:${tagBg}; color:${tagColor}">${factionName}</div>
                    <div class="char-img-area" style="background-image: url('${c.img}')"></div>
                    <div class="char-info">
                        <div class="char-name">${c.name}</div>
                        <div class="char-role">${c.role}</div>
                    </div>
                `;
                // í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸° (ì „ì²´ ë¦¬ìŠ¤íŠ¸ì—ì„œì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ì•¼ í•¨)
                card.onclick = () => openModal(c.id);
                grid.appendChild(card);
            });
        }

        function openModal(id) {
            // IDë¡œ ìºë¦­í„° ì°¾ê¸°
            const c = allCharacters.find(char => char.id === id);
            
            document.getElementById('mName').innerText = c.name;
            document.getElementById('mRole').innerText = c.role;
            document.getElementById('mGift').innerText = c.gift;
            document.getElementById('mRank').innerText = c.rank;
            document.getElementById('mPersonality').innerText = c.personality;
            document.getElementById('mNote').innerText = c.note;
            document.getElementById('mQuote').innerText = `"${c.quote}"`;
            
            document.getElementById('mImg').src = c.img;

            const content = document.getElementById('modalContent');
            let borderColor = '#444';
            if(c.faction === 'hero') borderColor = 'var(--hero-color)';
            if(c.faction === 'villain') borderColor = 'var(--villain-color)';
            if(c.faction === 'res') borderColor = 'var(--res-color)';
            
            content.style.borderColor = borderColor;
            document.getElementById('mQuote').style.borderLeftColor = borderColor;
            document.getElementById('mQuote').style.color = borderColor;

            document.getElementById('modalOverlay').style.display = 'flex';
        }
    </script>
</body>
</html>